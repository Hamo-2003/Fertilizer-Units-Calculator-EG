<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>أداة حساب وحدات السماد</title>
<style>
  body { font-family: 'Cairo', sans-serif; background: #f7f7f7; margin: 20px; }
  header, footer { text-align: center; padding: 10px; font-weight: bold; color: #ff6600; }
  .lang-switch { position: absolute; top: 10px; left: 10px; }
  .container { background: white; padding: 20px; border-radius: 16px; box-shadow: 0 0 10px #ccc; }
  button { padding: 10px 15px; margin: 5px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; }
  .export { background: #007bff; color: white; }
  .print { background: #28a745; color: white; }
</style>
</head>
<body><div class="lang-switch">
  <select id="language" onchange="switchLanguage()">
    <option value="ar">العربية</option>
    <option value="en">English</option>
  </select>
</div><header>⚡ تصميم م. محمد صبحي ⚡</header><div class="container">
  <h2 id="title">حاسبة وحدات العناصر من الأسمدة</h2><label id="fertLabel">اختر السماد:</label> <select id="fertilizer"></select>

<br><br> <label id="unitLabel">أدخل عدد الوحدات المطلوبة:</label> <input type="number" id="units" />

<button onclick="calculate()">حساب</button>

  <h3 id="result"></h3><button class="export" onclick="downloadCSV()">تصدير CSV</button> <button class="export" onclick="downloadExcel()">تصدير Excel</button> <button class="print" onclick="window.print()">طباعة</button>

</div><footer>⚡ Created by ENG. Mohamed Sobhy ⚡</footer><script>
const fertilizers = {
  "Urea 46% N": { N: 46 },
  "Ammonium Nitrate 33.5%": { N: 33.5 },
  "MAP 12-61-0": { N: 12, P: 61 },
  "DAP 18-46-0": { N: 18, P: 46 },
  "MKP 0-52-34": { P: 52, K: 34 },
  "NPK 20-20-20": { N: 20, P: 20, K: 20 }
};

function loadFertilizers() {
  const select = document.getElementById("fertilizer");
  for (let f in fertilizers) {
    const option = document.createElement("option");
    option.value = f;
    option.textContent = f;
    select.appendChild(option);
  }
}

function calculate() {
  const fert = document.getElementById("fertilizer").value;
  const units = document.getElementById("units").value;

  const percent = Object.values(fertilizers[fert])[0];
  const kg = (units / (percent / 100)).toFixed(2);

  document.getElementById("result").textContent = `تحتاج إلى ${kg} كجم من سماد ${fert}`;
}

function downloadCSV() {
  let data = document.getElementById("result").textContent;
  let blob = new Blob([data], { type: 'text/csv' });
  let url = URL.createObjectURL(blob);
  let a = document.createElement('a');
  a.href = url;
  a.download = 'fertilizer_result.csv';
  a.click();
}

function downloadExcel() {
  let data = document.getElementById("result").textContent;
  let blob = new Blob([data], { type: 'application/vnd.ms-excel' });
  let url = URL.createObjectURL(blob);
  let a = document.createElement('a');
  a.href = url;
  a.download = 'fertilizer_result.xls';
  a.click();
}

function switchLanguage() {
  const lang = document.getElementById("language").value;

  if (lang === "en") {
    document.body.dir = "ltr";
    document.getElementById("title").textContent = "Fertilizer Nutrient Unit Calculator";
    document.getElementById("fertLabel").textContent = "Select fertilizer:";
    document.getElementById("unitLabel").textContent = "Enter required units:";
  } else {
    document.body.dir = "rtl";
    document.getElementById("title").textContent = "حاسبة وحدات العناصر من الأسمدة";
    document.getElementById("fertLabel").textContent = "اختر السماد:";
    document.getElementById("unitLabel").textContent = "أدخل عدد الوحدات المطلوبة:";
  }
}

loadFertilizers();
</script></body>
</html>
